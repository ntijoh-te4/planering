= Terminalen och Unix

Unix är ett av de första operativsystemen. Det började utvecklas på 70-talet och kördes då främst på stordatorer där många användare loggade in och utförde arbete samtidigt via s.k. terminaler. En stor majoritet av internet är byggt på Unix-servrar. MacOS är helt unix-kompatibelt och Linux är nästan.

Fokus är på en allmänbildning om Unix och open source och att komma igång med att anvädnda terminalen.

.*T3*
* Terminalen 3 - Operatorer & pipes

.*T4*
* Terminalen 4 - Användare & rättigheter (kördes ej 21/22)

== Filer & mappar

* Kunskap om kommandon för att navigera i terminalen och förstå absoluta och relativa sökvägar.
* Kunskap om olika filtyper, metadata och förståelse att allting är filer i unix. Använda kommandon för att manipulera filer genom följande operationer.
* För att kunna använda CLI-baserade utvecklingsverktyg och göra grundläggande arbete i terminalen.

=== Föreläsningar
* Terminalen och lite om Unix

=== Övningar

==== Terminalen 1
* Gör övningen från första presentationen om terminalen
* https://www.katacoda.com/sjnewhouse/scenarios/cli_bootcamp[Katacoda - Basic Linux and the Command Line], Övning: 1 - 15
* Quiz: Terminalen 1 - Intro

==== Terminalen 2
* https://www.katacoda.com/sjnewhouse/scenarios/cli_bootcamp[Katacoda - Basic Linux and the Command Line], Övning: Alla från 16. Behöver ni så gör om 1-15 först.
* Quiz: Terminalen 2 - Navigering & filhantering

=== Läs

==== Terminalen
* https://ubuntu.com/tutorials/command-line-for-beginners#1-overview[The Linux command line for beginners - Ubuntu tutorials] icon:book[]
* https://www.fosslinux.com/43292/linux-terminal-commands-to-try-for-a-beginner.htm[Top 20 Linux Terminal Commands to try for a Beginner - FOSS Linux] icon:book[]

[cols=">1,3,3"]
|===
| Kommando | Beskrivning | Exempel

| `cd`
| Förflyttning genom mappar
| `cd ~/Desktop`

| `pwd`
| Visar aktuell mapp
| `pwd`

| `ls`
| Listar filer och mappar
| `ls` och `ls ~`

| `cat`
| Visa innehållet i en fil
| `cat fil.txt`

| `cp`
| Skapa kopior av filer och mappar
| `cp fil1.txt fil2.txt`

| `less` & `more`
| Öppnar en fil för läsning
| `less fil1.txt`

| `du`
| Visar hur mycket plats filer och mappar ta upp
| `du -h ~/Desktop`

| `df`
| Visar hur mycket ledig plats som finns
| `df -h ~`

| `touch`
| Skapar en fil
| `touch nyfil.txt`

| `mkdir`
| Skapar en ny mapp
| `mkdir ny-mapp`

| `rmdir`
| Tar bort en mapp om den är tom. Se `rm`.
| `rmdir ny-mapp`

| `rm`
| Tar bort filer eller mappar. Kan göras rekursivt.
| `rm fil1.txt`

| `mv`
| Flyttar (eller byter namn) på en fil eller map 
| `mv fil.txt ~/Desktop/fil.txt`

| `clear`
| Rensar terminalskärmen
| `clear`

| `man`
| Öppna kommandots manualtext. Använd `q` för att återgå.
| `man cd`

| `du`
| Räknar hur stor en fil eller mapp är. https://www.oreilly.com/library/view/macintosh-terminal-pocket/9781449328962/re31.html[Läs mer]
| `du fil.txt`

| `file`
| Kommandot tittar på en fil och försöker lista ut vilken sorts fil det är. https://en.wikipedia.org/wiki/File_(command)[Läs mer]
| `file fil.txt`

|`alias`
| Skapar en genväg till kommandon, med eller utan nycklar, för att t.ex. spara tid.
|`alias lista="ls -lah` +
körs med: `lista``

|`history`
|
|`Visar vilka kommandon du kört i terminalen`

|`echo`
| Skriver ut en sträng, vanligt använt för statusuppdateringar i t.ex. shellscripts.
|`echo "hello"`

|===

=== Filsystemet i Unix
* https://tldp.org/LDP/sag/html/dir-tree-overview.html[kapitel 3 i The Linux System Administrator's Guide] icon:book[]

[cols="1,4"]
|===
| Sökväg | Beskrivning

|`/bin`
|Binärfiler (dvs. program)
 
|`/etc`
|Inställningar (för t.ex. Wifi) och scripts för (t.ex. uppstart av servrar).

|`/home`
|Alla vanliga användares hemmappar. +
Root-användaren har sin i `/root`.

|`/mnt`
|Lagringsenheter som t.ex. partitioner och USB-minne.

|`/var/log`
| Loggfiler

|`/proc`
|Hårdvaruinfo om alla enheter som t.ex. nätverkskort och CPU. +
Testa: `cat /proc/cpuinfo`

|===

== Redigera text, söka i filer och streams

Använda CLI program för att skriva, redigera, söka, sortera, filtrera och ändra text. Samt att söka efter filer med specifika egenskaper.

* Kunna använda vanliga kommandon med växlar.
* Kunna söka efter text och filer i CLI-baserat gränssnitt.
* Kunna använda flera CLI program tillsammans.
* Kunskap om indata/utdata till terminalen, filer och andra program.

=== Editors

För att arbeta effektivt och smidigt behöver utvecklare grundläggande redigering av textfiler från terminalen i s.k. `cli-edotirs`. Många olika verktyg finns och ofta återkommer de t.ex. för att skriva kommentarer till s.k. `commits` i versionshanteringsverktyg eller för att göra enkla inställningar i t.ex. en webbserver. 

==== Övning, editors

Arbeta i minst en av följand texteditors för att skriva en riktig text eller kod:  `nano`, `vim` eller `emacs`. Många upplever `nano` som enklast att komma igång med. Det finns mängder av guider för hur du använder dem.

#TODO:# Gör en tydligare övning

=== Streams, redirects och piping

När du skriver ett kommando som tex. `date` syns resultatet i något som heter `stdout`. För en dator är det nästan alltid att visa resultatet på skärmen. Eftersom `Unix` i många fall används utan skärm (tex en webbserver) vill man kanske att `stdout` ska synas i tex. en loggfil. Det vanliga sättet är använda "redirect operatorn" `>`.  En annan vanlig `operator` är att vilja sortera t.ex. rader i en textfil.

==== Läs
* https://www.redhat.com/sysadmin/redirect-operators-bash[Five ways to use redirect operators in Bash - Red Hat] icon:book[]
* https://www.brianstorti.com/understanding-shell-script-idiom-redirect/[Understanding Shell Script's idiom: 2>&1 - Brian Storti] icon:book[] 
* https://www.redhat.com/sysadmin/pipes-command-line-linux[Working with pipes on the Linux command line - Red Hat] icon:book[] 

===== Standard streams
[cols=">1,3,3"]
|===
| Stream | Beskrivning | Exempel

|`stdin`
|
|

|`stdout`
|
|

|`stderr`
|
|

|===

===== Operatorer
[cols=">1,5,5"]
|===
| Operator | Beskrivning | Exempel

|`>`
| `Output` - Skriver och ersätter innehållet i en fil
| `date > datum.txt`

|`>>`
| `Append` - Lägger till data sist i filen
| `date >> datum.txt`

|`<`
| `Input` operator - Läser data från en ström (eller fil)
| `sort < datum.txt`

|`2>`
| Redirectar felmedelande (`stderr`)
|

|`\|`
|`Pipe` - skickar data från ett kommando till nästa
|`ls /etc/ \| sort`

|
|Det går att kombinera flera operatorer
|`ls /etc/ \| sort > etc-sorterat.txt`

|===

===== Kommandon

[cols=">1,3,3"]
|===
| Kommando | Beskrivning | Exempel

|`tail` & `head`
|
| Jämför `tail /var/log/system.log` och `head /var/log/system.log`.

|`sort`
| Sorterar rader i filer
| 

| `wc`
| Räkna mängden ord, rader eller bytes som finns i en textfil. https://www.fosslinux.com/45753/linux-wc-command-examples.htm[Läs mer]
| `wc fil.txt`

|`grep`
|Söker i filer
|`grep -i 'Bob' contacts.txt`

|`find`
|Söker efter t.ex. filnamn. https://linuxize.com/post/how-to-find-files-in-linux-using-the-command-line/[Läs mer]
|`find ~/Desktop -name "*.png"`

|===


Kunna använda följande operatorer.

==== Övning, pipes och operatorer

Prova (med exempelfilerna för kontaktlistan): `sort < contacts.txt`.

`|` (pipe) används för att skicka vidare output från ett verktyg till nästa. Skapa två olika textfiler med kontakter. Arbeta med `cat`, `sort`` och `grep`.

Exempelmaterial
----
contacts.txt

Bob Jones
Leslie Smith
Dana David
Susan Gee
Leonard Schmidt
Linda Gray
Terry Jones
Colin Doe
Jenny Case
Terry Jones

kontakter.txt

Jens Berggren
Emil Bengtsson
Johan Eriksson
Lana Ek
Pauline Jakobsson
Nikolina Gustavsson
Linn Forsberg

----

Se quiz 3 i Google forms. Tar upp ungefär följande:

* Hur kan du sortera en lista?
* Hur sparar du den sorterade listan?
* Hur sorterar du på efternamn?
* Hur kan du vända sorteringen?
* Hur kan du slå ihop och sortera namnen från både contacts.txt och kontakter.txt
* Hur kan du söka bland båda listorna?
* Vad gör kommandot: cat contacts.txt | sort | uniq ?

== Unix permissions #TODO#

Kunskap om filrättigheter och kunna ändra dessa från terminalen.

=== Varför?

För att kunna manipulera filer i CLI-baserad gränssnitt utan GUI.

=== Vad?

Kunna använda följande kommandon med vanliga växlar.

Koncept: `användare` och `grupper`

Läs: https://help.ubuntu.com/community/FilePermissions icon:book[]

==== Kommandon
[cols=">1,3,3"]
|===
| Kommando | Beskrivning | Exempel

|`ls -l`
| Visar rättigheter, ägare och grupp för filer och mappar. Se kapitelt om filer.
| 

|`sudo`
| För att köra ett kommando som `root`
| `sudo ls /root`

|`id`
| Visar vilken användare du är grupper du tillhör
|`id -p`

|`chown`
| Byter ägare på filer eller mappar.
| `chown root fil1.txt` + 
`fil1.txt` byter ägare till `root`

|`chgrp`
| Byter grupp på filer och mappar.
| `chgrp admingroup fil1.txt` +
`fil1.txt` byter grupp till `admingroup`

|`chmod`
|
|

|`umask`
|
|

|===


== Processer #TODO#

Kunskap hur man interagerar med processer från terminalen och hur dessa samspelar med varandra.


=== Varför?

För att kunna använda CLI-baserade utvecklingsverktyg.


=== Vad?

.Kort kommandon:
- CTRL + C
- CTRL + Z

.Kommandon:
- kill
- ps
- jobs
- fg
- top

.Operatorer:
- &
- &&

== Scripting och shellscripts #TODO#

Kunskap hur man använder bash scripting. Läs: https://www.shellscript.sh/ För att förstå grunderna i shell programmering.

=== Varför?

För att kunna använda utveckla CLI-baserade verktyg.

=== Vad?

.Koncept:
----
Shebangs, Arguments, Variables, Envrionment variables, Escaping, Subshells, Conditionals
----
